---
// src/components/ProjectCard.astro
interface Props {
  title: string;
  description: string;
  technologies: string[];
  imageSrc: string; // Path to your project image/gif
  link: string; // Link to the detailed project page
  githubRepo?: string | null;
  liveDemo?: string | null;
}

const { title, description, technologies, imageSrc, link, githubRepo, liveDemo } = Astro.props;
---

<article class="group relative bg-space-dark rounded-2xl overflow-hidden border border-space-blue/30 hover:border-accent-blue/50 transition-all duration-300 hover:shadow-2xl hover:shadow-accent-blue/10 flex flex-col h-full animate-on-scroll hover:-translate-y-2">
  
  {/* Action Buttons - Top Right */}
  <div class="absolute top-4 right-4 z-30 flex gap-2">
    {githubRepo && (
      <a 
        href={githubRepo} 
        target="_blank" 
        rel="noopener noreferrer" 
        class="flex items-center gap-2 text-xs font-bold text-white bg-space-dark/80 backdrop-blur-sm hover:bg-space-blue hover:text-white px-3 py-2 rounded-full transition-all border border-white/10 shadow-lg"
      >
        <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 fill-current"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
        Code
      </a>
    )}
    {liveDemo && (
      <a 
        href={liveDemo} 
        target="_blank" 
        rel="noopener noreferrer" 
        class="flex items-center gap-2 text-xs font-bold text-white bg-space-dark/80 backdrop-blur-sm hover:bg-space-blue hover:text-white px-3 py-2 rounded-full transition-all border border-white/10 shadow-lg"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
        Demo
      </a>
    )}
  </div>

  {/* Image Section */}
  <div class="relative overflow-hidden h-64 sm:h-72">
    <div class="absolute inset-0 bg-space-dark/20 z-10 group-hover:bg-transparent transition-colors duration-300"></div>
    <img
      src={imageSrc || `https://placehold.co/600x400/1e293b/cbd5e1?text=${encodeURIComponent(title)}`}
      alt={`Preview of ${title}`}
      class="w-full h-full object-cover transform transition-transform duration-700 group-hover:scale-110"
    />
  </div>

  {/* Content Section */}
  <div class="p-6 flex flex-col flex-grow relative bg-space-dark/95 backdrop-blur-sm pointer-events-none">
    <div class="mb-4 relative z-0">
         <h3 class="text-2xl font-bold text-white mb-2 leading-tight group-hover:text-accent-blue transition-colors">{title}</h3>
        <p class="text-star-light/80 text-sm line-clamp-3 leading-relaxed">
        {description}
        </p>
    </div>

    {/* Technologies */}
    <div class="flex flex-wrap gap-2 mt-auto relative z-0">
      {technologies.slice(0, 4).map(tech => (
        <span class="text-xs font-medium px-2.5 py-1 rounded bg-space-blue/20 text-accent-blue border border-space-blue/30">
          {tech}
        </span>
      ))}
      {technologies.length > 4 && (
        <span class="text-xs font-medium px-2 py-1 text-star-light/60">
          +{technologies.length - 4} more
        </span>
      )}
    </div>
  </div>

  {/* Clickable Overlay for the entire card - Placed last to ensure it's on top */}
  <a href={link} class="absolute inset-0 z-20" aria-label={`View details for ${title}`}>
    <span class="sr-only">View project details</span>
  </a>

</article>
